---
layout: post
title: Qubes Alpha 3!
date: '2010-10-06T16:00:00.003+02:00'
author: Joanna Rutkowska
tags:
- qubes
modified_time: '2010-10-06T16:29:07.797+02:00'
thumbnail: http://3.bp.blogspot.com/_Ti3q3Hdvels/TKpR7rgoq4I/AAAAAAAAAGw/ARa_TKsWL1E/s72-c/disposablevm.png
blogger_id: tag:blogger.com,1999:blog-24586388.post-9214464405081236892
blogger_orig_url: http://theinvisiblethings.blogspot.com/2010/10/qubes-alpha-3.html
---

We have just uploaded the new packages for the Qubes Alpha 3 milestone. A lot of under the hood work went into this release, including:<br /><ul><li>Support for <a href="/2010/06/01/disposable-vms.html">fast-booting Disposable VM</a> (see also implementation description <a href="http://www.qubes-os.org/trac/wiki/DVMimpl">here</a>)</li></ul><ul><li><a href="http://www.qubes-os.org/trac/wiki/Qmemman">Dynamic memory balancing</a> between AppVMs</li></ul><ul><li>Redesigned <a href="http://www.qubes-os.org/trac/wiki/QubesNet">networking </a>and NetVM support (for VT-d system)</li></ul><ul><li>Reasonably stable S3 sleep support (suspend-to-RAM), that works even with a NetVM!</li></ul><ul><li>Improved GUI virtualization (all known bugs fixed finally!)</li></ul>Disposable VMs are really a killer feature IMO. The screenshot below shows the user's experience:<br /><br /><a href="http://3.bp.blogspot.com/_Ti3q3Hdvels/TKpR7rgoq4I/AAAAAAAAAGw/ARa_TKsWL1E/s1600/disposablevm.png"><img style="display: block; margin: 0px auto 10px; text-align: center; cursor: pointer; width: 320px; height: 253px;" src="http://3.bp.blogspot.com/_Ti3q3Hdvels/TKpR7rgoq4I/AAAAAAAAAGw/ARa_TKsWL1E/s320/disposablevm.png" alt="" id="BLOGGER_PHOTO_ID_5524317978657074050" border="0" /></a>The user righ-clicks on a PDF file, chooses "Open in Disposable VM", and then waits 1... 2... 3... 4 seconds (assuming a reasonably modern laptop) and the document automagically opens in a fresh new Disposable VM. If you make some changes to the document (e.g. if it was a PDF form, and you edited it), those changes will propagate back to the original file in the original AppVM.<br /><br />So, within 4-5 seconds, Qubes creates a new VM, boots it up (actually refreshes from a savefile), copies the file in question to the VM, and finally opens the application that is a registered MIME handler for this type of documents, e.g. a PDF viewer. We're pretty confident this time could be further decreased down to some 2 seconds, or maybe even less. This is planned for some later Beta release.<br /><br />Dynamic memory balancing allows to better utilize system physical memory by moving it between running AppVMs in realtime, according to the VM's real needs. This allows to run more VMs, compared to a scheme with static memory allocation, and also dramatically eliminates system hiccups, that otherwise occur often in a static scheme when one of the VMs is short of memory and initiates swapping.<br /><br /><a href="http://2.bp.blogspot.com/_Ti3q3Hdvels/TKpSgz5-66I/AAAAAAAAAG4/3z-eUmZJwyw/s1600/qmemman.png"><img style="display: block; margin: 0px auto 10px; text-align: center; cursor: pointer; width: 320px; height: 151px;" src="http://2.bp.blogspot.com/_Ti3q3Hdvels/TKpSgz5-66I/AAAAAAAAAG4/3z-eUmZJwyw/s320/qmemman.png" alt="" id="BLOGGER_PHOTO_ID_5524318616566033314" border="0" /></a>The screenshot above shows the memory usage on my 6GB laptop when writing this blog post. As you can see I can easily run a dozen of AppVMs (most users will not need that many, but I'm a bit more paranoid I guess ;) and could probably even start a few more if there was such a need (e.g. open some Disposable VMs). Of course, this all depends on the actual type of workload the user runs in each VM - most of my AppVMs run just one or two applications, usually a Web browser (Firefox), but some, e.g. the work, and personal AppVMs run much more memory-hungry applications such as Open Office, or Picasa Photo Browser. I very rarely see more than 1 GB of memory allocated to a single VM, though. Generally speaking, the new memory management in Qubes works pretty nice.<br /><br />Currently, the biggest slow-down factor for Qubes is somehow poor disk performance, most likely  caused by the joint impact of the Xen backend, Linux dm, and kcryptd (we use the simplest possible Xen block backend for security reasons, will move to more sophisticated backends when we introduce untrusted storage domain in Qubes 2.0).<br /><br />Now, most of the under-the-hood work for Qubes 1.0 seems to be complete, and now it time for all the polishing of the user experience, which will be the main focus of the upcoming Beta development. Just reminding that we're currently looking to <a href="/2010/09/28/itl-is-hiring.html">hire developers</a> for this effort.<br /><br />The Installation instructions can be found <a href="http://www.qubes-os.org/trac/wiki/InstallationGuide">here</a>. Enjoy!